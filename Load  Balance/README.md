
# 目录
  
  * [负载均衡概述](#负载均衡概述)
  * [负载均衡集群的复杂度](#负载均衡集群的复杂度)
  * [负载均衡系统分类](#负载均衡系统分类)
    * DNS域名解析负载均衡---一般用来实现地理级别的均衡

    * 硬件负载均衡---硬件负载均衡用于实现集群级别的负载均衡
      * [F5]()
    
    * 软件负载均衡---软件负载均衡用于实现机器级别的负载均衡。
      * HTTP重定向负载均衡
      * 反向代理负载均衡
      * [LVS负载均衡](#LVS负载均衡)---LVS 是最流行的四层负载均衡软件
      * HAProxy负载均衡---HAProxy可是另一个既支持四层又支持七层负载均衡的软件
      * Nginx负载均衡---Nginx 则是七层负载均衡最流行的解决方案
      * IP负载均衡
      * 数据链路层负载均衡
      
      
  * [负载均衡架构](#负载均衡架构)
  
    * 地理级别的均衡
    * 集群级别的负载均衡
    * 机器级别的负载均衡
  
  * [负载均衡算法](#负载均衡算法)
    * 任务平分类算法
    * 负载均衡类算法
    * 性能最优类算法
    * Hash 类算法
    * 轮询算法
    * 按权重分配算法
    * 按照负载进行分配算法(如果按照服务器的负载进行分配，则业务服务器还要能够上报自己的状态给任务分配器)
    
  * 负载均衡服务器和业务服务器之间连接和交互
    * 连接建立
    * 连接检测
    * 连接中断后的处理
    

## 负载均衡概述

在运算系统集群 或 存储系统集群 或 缓存系统集群都要用到负载均衡

在架构中加入负载均衡系统，负载均衡系统可以使用的位置：可以使用在web应用服务之前，也可用在数据库集群前（如：在MySQL集群中，使用LVS将数据库请求分散到各个从服务器）。


## 负载均衡集群的复杂度

   **单个任务负载均衡分配器复杂度     **

   <a href="https://ibb.co/F0cP8VQ"><img src="https://i.ibb.co/nn4WQCX/2018-09-01-3.png" alt="2018-09-01-3" border="0"></a>


   **N个任务负载均衡分配器的复杂度**

   <a href="https://ibb.co/VSsDXpY"><img src="https://i.ibb.co/Z80Ky1z/1-2018-09-01-2.png" alt="1-2018-09-01-2" border="0"></a>

   
## 负载均衡系统分类

### DNS域名解析负载均衡
     
     DNS 是最简单也是最常见的负载均衡方式，一般用来实现地理级别的均衡，DNS 负载均衡的本质是DNS 解析同一个域名可以返回不同的IP 地址

    【优点】
           
           ( I ）简单、成本低： 负载均衡工作交给DNS 服务器处理，无须自己开发或维护负载均衡设备。
           ( 2 ）就近访问，提升访问速度： DNS 解析时可以根据请求来源IP ，解析成距离用户最近的服务器地址，可以加快访问速度， 改善性能。
    【缺点】
     
           (1）更新不及时： DNS 缓存的时间比较长，修改DNS 配置后，由于缓存的原因，还是有很多用户会继续访问修改前的IP ，这样的访问会失败，达
               不到负载均衡的目的， 并且也影响用户正常使用业务。
           (2）扩展性差： DNS 负载均衡的控制权在域名商那里， 无法根据业务特点针对其做更多的定制化功能和扩展特性。
           (3）分配策略比较简单： DNS 负载均衡支持的算法少：不能区分服务器的差异（不能根据系统与服务的状态来判断负载）；也无法感知后端服务器的
               状态。


### 硬件负载均衡

    硬件负载均衡是通过单独的硬件设备来实现负载均衡功能，这类设备和路由器交换机类似，可以理解为一个用于负载均衡的基础网络设备。目前业界典型的硬件
    负载均衡设备有两款： FS和AlO
    
    硬件负载均衡的优缺点如下。
    
    【优点】
          ( 1 ）功能强大： 全面支持各层级的负载均衡，支持全面的负载均衡算法，支持全局负载均衡。
          ( 2 ）性能强大： 对比一下，软件负载均衡支持到10 万级井发己经很厉害了，硬件负载均衡可以支持100 万以上的并发。
          ( 3 ） 稳定性高： 商用硬件负载均衡，经过了良好的严格测试，经过大规模使用， 在稳定性方面高。
          ( 4 ）支持安全防护： 硬件均衡设备除具备负载均衡功能外，还具备防火墙、防DDOS 攻击等安全功能。
    【缺点】
          ( 1 ）价格昂贵： 最普通的一台FS 就是一台“马6 气好一点的就是“宝马、Q7 ”了。
          ( 2 ）扩展能力差：硬件设备，可以根据业务进行配置， 但无法进行扩展和定制：


### 软件负载均衡

    软件负载均衡通过负载均衡软件来实现负载均衡功能， 常见的有Nginx 和LVS ， 其中Nginx是软件的7 层负载均衡， LVS 是Linux 内核的4 层负载均衡。
    4 层和7 层的区别就在于协议和灵活性。Nginx 支持HTTP 、E-mail 协议， 而LVS 是4 层负载均衡，和协议无关，几乎所有应用都可以做，例如，聊天、数
    据库等。软件和硬件的最主要区别就在于性能，硬件负载均衡性能远远高于软件负载均衡性能。Ngxin 的性能是万级，一般的Linux 服务器上装一个Nginx 大
    概能到5 万／每秒： LVS 的性能是十万级，据说可达到80 万／每秒；而自性能是百万级，从200 万／每秒到800 万／每秒都有。当然，软件负载均衡的最大
    优势是便易，
    
#### LVS负载均衡

## 负载均衡架构

## 负载均衡算法




---

# 有用的参考
   
   * 实用负载均衡技术网站性能优化攻略.pdf
   
   * [快速理解高性能HTTP服务端的负载均衡技术原理](http://www.52im.net/thread-1950-1-1.html)
   
   * [如何打造应对超大流量的高性能负载均衡](https://mp.weixin.qq.com/s?__biz=MzI4NTA1MDEwNg==&mid=2650763691&idx=1&sn=e5f6e863e54b347d431e99dccee1b6be&chksm=f3f9c43ec48e4d28ff6b5cc3a6795db08ba89e6aaf330dba5a09d853ff96e2fc05d31d63ddb4&scene=21#wechat_redirect)
   
   * [一分钟了解负载均衡的一切](https://mp.weixin.qq.com/s?__biz=MjM5ODYxMDA5OQ==&mid=2651959585&idx=1&sn=0a9222cbfeb62a662edffafb7f0b43ae&scene=21#wechat_redirect)
   
   * [lvs为何不能完全替代DNS轮询](https://mp.weixin.qq.com/s?__biz=MjM5ODYxMDA5OQ==&mid=2651959595&idx=1&sn=5f0633afd24c547b895f29f6538baa99&scene=21#wechat_redirect)
   
   * [如何实施异构服务器的负载均衡及过载保护](https://mp.weixin.qq.com/s?__biz=MjM5ODYxMDA5OQ==&mid=2651959601&idx=1&sn=5684c39676b1f6d9366d9d15a2cdcec3&scene=21#wechat_redirect)
